!function(t,s){function i(n,o){i.counter=i.counter||0,e["whenInViewport"+ ++i.counter]=t.extend({},t.whenInViewport.defaults,o,{$el:n,topOffset:n.offset().top}),a()}function a(){var i=n.scrollTop();o=o||n.height(),t.each(e,function(n,t){i+o>t.topOffset+t.threshold&&(t.context?t.callback.call(t.context,e[n].$el):t.callback(e[n].$el),delete e[n],f.checkRegistry())})}function r(){o=n.height(),t.each(e,function(t,n){e[t].topOffset=n.$el.offset().top})}function c(e,n){i(t(e),n),f.checkRegistry()}var o,n=s.app&&s.app.$window||t(s),e={},u=100,h=function(e,n){var t=function(){clearTimeout(t.timeout),t.timeout=setTimeout(e,n)};return t},f={namespace:".whenInViewport",setuped:!1,setup:function(){this.setuped||(n.on("scroll"+this.namespace,h(a,u)),n.on("resize"+this.namespace,h(r,u)),this.setuped=!0,o=n.height())},destroy:function(){this.setuped&&n.off(this.namespace),this.setuped=!1},checkRegistry:function(){t.isEmptyObject(e)?this.destroy():this.setup()}};t.extend(c,{setDelayEngine:function(t){return h=t,this},setDelayTimeout:function(t){return u=t,this}}),t.whenInViewport=c,t.whenInViewport.defaults={callback:function(){},threshold:0,context:null},t.fn.whenInViewport=function(e){return"function"==typeof e&&(e={callback:e}),this.each(function(){t.data(this,"whenInViewport")||t.data(this,"whenInViewport",new c(this,e))})}}(window.jQuery||window.Zepto,window);