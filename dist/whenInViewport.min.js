!function(t,s){function o(n,i){o.counter=o.counter||0,e["whenInViewport"+ ++o.counter]=t.extend({},t.whenInViewport.defaults,i,{$el:n,topOffset:n.offset().top}),f()}function f(){var o=n.scrollTop();t.each(e,function(n,t){o+r>t.topOffset-t.threshold&&(t.context?t.callback.call(t.context,e[n].$el):t.callback(e[n].$el),delete e[n],c.checkRegistry())})}function a(){r=n.height(),t.each(e,function(t,n){e[t].topOffset=n.$el.offset().top})}function i(e,n){o(t(e),n),c.checkRegistry()}var r,n=s.app&&s.app.$window||t(s),e={},h=100,u=function(e,n){var t=function(){clearTimeout(t.timeout),t.timeout=setTimeout(e,n)};return t},c={namespace:".whenInViewport",setuped:!1,setup:function(){this.setuped||(n.on("scroll"+this.namespace,u(f,h)),n.on("resize"+this.namespace,u(a,h)),this.setuped=!0,r=n.height())},destroy:function(){this.setuped&&n.off(this.namespace),this.setuped=!1},checkRegistry:function(){t.isEmptyObject(e)?this.destroy():this.setup()}};t.extend(i,{setDelayEngine:function(t){return u=t,this},setDelayTimeout:function(t){return h=t,this},destroy:function(){e={},c.destroy()}}),t.whenInViewport=i,t.whenInViewport.defaults={callback:function(){},threshold:0,context:null,setupOnce:!1},t.fn.whenInViewport=function(e,n){return"function"==typeof e&&(e=t.extend({},n,{callback:e})),this.each(function(){e.setupOnce&&!t.data(this,"whenInViewport")?t.data(this,"whenInViewport",new i(this,e)):new i(this,e)})}}(window.jQuery||window.Zepto,window);